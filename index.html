<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resgate seu Pr√™mio</title>
  <style>
    :root{
      --bg1:#0f172a; --bg2:#0b1223; --text:#fff; --muted:rgba(255,255,255,.74);
      --card:rgba(255,255,255,.08); --card-b:rgba(255,255,255,.14);
      --brand:#f59e0b; --brand-2:#fbbf24;
      --ok:#10b981; --ok-600:#059669;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      color:var(--text);
      background: radial-gradient(1000px 700px at 10% -10%, #1f2937 0%, transparent 60%),
                  radial-gradient(700px 500px at 120% 10%, #1e293b 0%, transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;align-items:center;justify-content:center;min-height:100vh;
    }
    .wrap{width:min(860px,95vw)}
    .card{background:var(--card);border:1px solid var(--card-b);backdrop-filter:blur(12px);border-radius:24px;padding:28px;box-shadow:0 18px 44px rgba(0,0,0,.45)}

    /* P√°ginas centralizadas */
    .page{opacity:0;pointer-events:none;position:absolute;inset:50% auto auto 50%;transform:translate(-50%,-50%) scale(.96);width:100%;max-width:860px}
    .page.active{opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1);transition:.3s ease}

    h1,h2,h3{margin:0 0 8px;text-align:center}
    .sub{color:var(--muted);margin:6px auto 18px;text-align:center}

    /* Indicador de etapas */
    .progress{display:flex;gap:8px;justify-content:center;margin-bottom:14px}
    .dot{width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,.25)}
    .dot.active{background:#fff}

    /* Bot√µes */
    .actions{display:flex;justify-content:center;margin-top:16px}
    .btn{display:inline-flex;align-items:center;justify-content:center;border:0;border-radius:16px;padding:14px 22px;font-weight:800;color:#1f2937;background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:0 16px 34px rgba(245,158,11,.35);cursor:pointer}
    .btn:hover{filter:brightness(1.05)}
    .btn-ok{color:#fff;background:linear-gradient(135deg,var(--ok),#22c55e);box-shadow:0 16px 34px rgba(16,185,129,.35)}

    /* Formul√°rio */
    form{max-width:420px;margin:0 auto}
    label{display:block;margin:12px 0 6px;color:rgba(255,255,255,.9)}
    .field{display:flex;align-items:center;padding:12px 14px;border:1px solid var(--card-b);border-radius:16px;background:rgba(0,0,0,.25)}
    .field input{flex:1;background:transparent;border:0;outline:0;color:#fff;font-size:1rem}
    .field.error{border-color:rgba(239,68,68,.7)}
    .hint{color:#fecaca;font-size:.84rem;margin-top:6px;display:none}
    .hint.show{display:block}

    /* Presente */
    .gift-area{display:grid;place-items:center;margin:22px 0}
    .gift{width:240px;height:240px;position:relative}
    .gift svg{width:100%;height:100%;filter: drop-shadow(0 18px 34px rgba(0,0,0,.5));}
    .lid{transform-origin:100px 78px;transition: transform .6s cubic-bezier(.2,.9,.2,1)}
    .open .lid{transform: translateY(-16px) rotate(-28deg)}
    .glow{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none}
    .glow>div{position:absolute;top:-18px;width:130px;height:130px;border-radius:999px;filter:blur(28px);opacity:.7;background: radial-gradient(circle at 30% 30%, #fde68a, #fff 60%, transparent 70%)}
    .glow{opacity:0;transition:opacity .35s ease}
    .open .glow{opacity:1}
    .flash{position:absolute;inset:0;margin:auto;width:24px;height:24px;border-radius:999px;background:radial-gradient(circle,#fff 0%, rgba(253,230,138,.9) 30%, rgba(255,255,255,0) 60%);opacity:0;transform:scale(0)}
    .blast .flash{animation:flash-pop .7s ease-out forwards}
    @keyframes flash-pop{0%{opacity:.9;transform:scale(.2)}60%{opacity:.7;transform:scale(12)}100%{opacity:0;transform:scale(18)}}

    /* Confete */
    .confetti{position:absolute;inset:0;overflow:hidden;pointer-events:none}
    .piece{position:absolute;top:-10%;width:6px;height:10px;border-radius:2px;opacity:.95;animation:fall linear forwards}
    @keyframes fall{to{transform:translateY(120vh) rotate(720deg);opacity:.9}}

    /* Faixa de pr√™mio */
    .award{margin-top:8px;display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:16px;background:linear-gradient(135deg,rgba(16,185,129,.22),rgba(99,102,241,.22));border:1px solid rgba(255,255,255,.18);box-shadow:0 10px 28px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);font-weight:800;color:#fff;opacity:0;transform:translateY(10px) scale(.95)}
    .award .check{width:28px;height:28px;border-radius:999px;display:grid;place-items:center;background:#10b981;box-shadow:0 6px 16px rgba(16,185,129,.35)}
    .award.show{animation:pop-in .45s cubic-bezier(.2,1,.2,1) forwards}
    @keyframes pop-in{0%{opacity:0;transform:translateY(10px) scale(.92)}60%{opacity:1;transform:translateY(-2px) scale(1.03)}100%{opacity:1;transform:translateY(0) scale(1)}}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- ETAPA 1 -->
    <section id="step-claim" class="card page active" aria-live="polite">
      <div class="progress" aria-hidden="true"><span class="dot active"></span><span class="dot"></span><span class="dot"></span></div>
      <h1 style="font-size:1.8rem;font-weight:900">Vila Verde Eventos</h1>
      <hr style="width:90%;max-width:520px;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);border:0;margin:10px auto 18px" />
      <h3 style="text-align:center;font-size:1.3rem">Resgate seu pr√™mio</h3>
      <p class="sub">Clique no bot√£o abaixo para come√ßar</p>
      <div class="actions"><button id="btn-start" class="btn" type="button">Come√ßar</button></div>
    </section>

    <!-- ETAPA 2 -->
    <section id="step-form" class="card page" aria-live="polite">
      <div class="progress" aria-hidden="true"><span class="dot"></span><span class="dot active"></span><span class="dot"></span></div>
      <h2>Alguns detalhes</h2>
      <p class="sub">Precisamos apenas do seu nome e telefone.</p>
      <form id="form" novalidate>
        <label for="name">Nome</label>
        <div class="field" id="field-name"><input id="name" name="name" autocomplete="name" placeholder="Seu nome completo" required /></div>
        <div id="hint-name" class="hint">Digite pelo menos 2 caracteres.</div>

        <label for="phone">Telefone (Brasil)</label>
        <div class="field" id="field-phone"><input id="phone" name="phone" inputmode="tel" autocomplete="tel" placeholder="(31) 9 9999-9999" required /></div>
        <div id="hint-phone" class="hint">Digite um n√∫mero v√°lido com DDD.</div>

        <div class="actions"><button id="submit" class="btn btn-ok" type="submit" disabled>Continuar</button></div>
      </form>
    </section>

    <!-- ETAPA 3 -->
    <section id="step-prize" class="card page" aria-live="polite">
      <div class="progress" aria-hidden="true"><span class="dot"></span><span class="dot"></span><span class="dot active"></span></div>
      <h2 id="headline" aria-live="polite"></h2>
      <div class="gift-area">
        <div id="gift" class="gift" role="img" aria-label="Presente">
          <svg viewBox="0 0 200 200" aria-hidden="true">
            <ellipse cx="100" cy="180" rx="58" ry="12" fill="rgba(0,0,0,0.18)" />
            <rect x="40" y="80" width="120" height="90" rx="10" fill="#6366F1" />
            <rect x="95" y="80" width="10" height="90" fill="#FDE68A" />
            <g class="lid">
              <rect x="35" y="60" width="130" height="28" rx="8" fill="#4F46E5" />
              <rect x="98" y="60" width="12" height="28" fill="#FDE68A" />
            </g>
            <path d="M100 60 C 85 40, 60 40, 60 60 C 60 75, 80 75, 100 65" fill="#FDE68A" />
            <path d="M100 60 C 115 40, 140 40, 140 60 C 140 75, 120 75, 100 65" fill="#FDE68A" />
          </svg>
          <div class="glow"><div></div></div>
          <div class="flash"></div>
        </div>
      </div>
      <div id="award" class="award"><span class="check">‚úì</span><span id="award-text">Voc√™ ganhou <strong>R$ 500</strong> de desconto!</span></div>
      <div class="actions"><button id="finish" class="btn btn-ok" type="button">Resgatar agora</button></div>
      <div id="confetti" class="confetti" aria-hidden="true"></div>
    </section>

  </div>

  <script>
    const $ = (s,el=document)=>el.querySelector(s);

    // üì≤ Defina aqui o n√∫mero do WhatsApp que vai receber as mensagens (apenas d√≠gitos, com DDI+DDD)
    // Ex.: 55 (Brasil) + 31 (DDD) + 99998888 => "553199998888"
    const WHATSAPP_NUMBER = "+553196426704"; // ‚Üê Substitua pelo n√∫mero real

    const stepClaim=$('#step-claim');
    const stepForm=$('#step-form');
    const stepPrize=$('#step-prize');

    const btnStart=$('#btn-start');
    const submit=$('#submit');
    const finish=$('#finish');

    const nameInput=$('#name');
    const phoneInput=$('#phone');
    const headline=$('#headline');

    const fieldName=$('#field-name');
    const fieldPhone=$('#field-phone');
    const hintName=$('#hint-name');
    const hintPhone=$('#hint-phone');

    const gift=$('#gift');
    const confetti=$('#confetti');

    function swap(from,to){
      from.classList.remove('active');
      to.classList.add('active');
    }

    // M√°scara telefone BR
    function maskPhone(v=''){
      const d=v.replace(/\D/g,'').slice(0,11);
      if(d.length<=2) return `(${d}`;
      if(d.length<=6) return `(${d.slice(0,2)}) ${d.slice(2)}`;
      if(d.length<=10) return `(${d.slice(0,2)}) ${d.slice(2,6)}-${d.slice(6)}`;
      return `(${d.slice(0,2)}) ${d.slice(2,7)}-${d.slice(7,11)}`;
    }

    function validName(){ return nameInput.value.trim().length >= 2 }
    function validPhone(){ return phoneInput.value.replace(/\D/g,'').length >= 10 }
    function updateSubmit(){
      const nOK = validName();
      const pOK = validPhone();
      fieldName.classList.toggle('error', !nOK);
      fieldPhone.classList.toggle('error', !pOK);
      submit.disabled = !(nOK && pOK);
    }

    phoneInput.addEventListener('input', e=>{ e.target.value = maskPhone(e.target.value); updateSubmit(); });
    nameInput.addEventListener('input', updateSubmit);

    btnStart.addEventListener('click', ()=> swap(stepClaim, stepForm));

    // Submete formul√°rio ‚Üí mostra pr√™mio
    document.querySelector('#form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const nOK = validName();
      const pOK = validPhone();
      hintName.classList.toggle('show', !nOK);
      hintPhone.classList.toggle('show', !pOK);
      if(!nOK || !pOK) return;

      headline.textContent = `${nameInput.value.split(' ')[0]}, seu pr√™mio est√° te esperando!`;
      swap(stepForm, stepPrize);
      setTimeout(()=> gift.classList.add('open'), 350);
      setTimeout(()=> { gift.classList.add('blast'); document.querySelector('#award').classList.add('show'); launchConfetti(220); }, 820);
    });

    // Finalizar ‚Üí abrir WhatsApp com mensagem preenchida
    finish.addEventListener('click', ()=>{
      if(!WHATSAPP_NUMBER || /X/.test(WHATSAPP_NUMBER)){
        alert('Defina o n√∫mero do WhatsApp em WHATSAPP_NUMBER (somente d√≠gitos, com DDI + DDD).');
        return;
      }
      const nome = nameInput.value.trim();
      const tel  = phoneInput.value.trim();
      const msg = `Ol√°, meu nome √© ${nome}. Quero solicitar o pr√™mio de desconto de R$ 500. Meu telefone: ${tel}.`;
      const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
      window.open(url, '_blank');
    });

    // Confete
    function launchConfetti(n=180){
      confetti.innerHTML='';
      const colors=['#6366F1','#22C55E','#EF4444','#F59E0B','#06B6D4','#A855F7'];
      for(let i=0;i<n;i++){
        const p=document.createElement('span');
        p.className='piece';
        p.style.left=(Math.random()*100)+'%';
        const dur=4+Math.random()*3;
        const delay=Math.random()*1.8;
        p.style.animationDuration=dur+'s';
        p.style.animationDelay=delay+'s';
        p.style.transform=`rotate(${Math.random()*360}deg)`;
        p.style.background=colors[Math.floor(Math.random()*colors.length)];
        p.style.width=(4+Math.random()*6)+'px';
        p.style.height=(8+Math.random()*10)+'px';
        confetti.appendChild(p);
        setTimeout(()=>p.remove(),(dur+delay)*1000+500);
      }
    }
  </script>
</body>
</html>
